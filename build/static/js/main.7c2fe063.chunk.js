(this.webpackJsonpecho=this.webpackJsonpecho||[]).push([[0],{346:function(e,t,n){},347:function(e,t,n){"use strict";n.r(t);var i=n(2),s=n(0),r=n(62),o=n.n(r),c=n(12),a=n(46),u=n(11),j=n(203),l=n.n(j),d=document.location,h=d.protocol+"//"+d.hostname+(d.port?":"+d.port:""),b=l()(h,{autoConnect:!1,cors:{origin:"http://".concat(document.domain),methods:["GET","POST"]}}),O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};console.log("EVENT ".concat(e," with data"),t),b.emit(e,t,(function(t){console.log("ACK ".concat(e)),n(t)}))},m=function(e,t){return b.on(e,(function(n){console.log("EXTERNAL EVENT: ".concat(e," with data"),n),t(n)}))},f=n(86),x=n(101),g=n(63),v={CONNECT:"connect",DISCONNECT:"disconnect",REGISTER_PLAYER:"register_user",BEGIN_GAME_CLAIMING_HOST:"begin_game_claiming_host",BEGIN_GAME:"begin_game",HOST_SUBMITS_WORD:"host_submits_word",PLAYER_SUBMITS_DEFN:"player_submits_defn",VOTE:"vote",ON_CONNECT:"on_connect",PLAYER_DISCONNECTS:"user_disconnects",PLAYER_REGISTERED:"user_registered",GAME_BEGUN:"game_begun",HOST_SUBMITTED_WORD:"host_submitted_word",PLAYER_SUBMITTED_DEFN:"player_submitted_defn",ALL_DEFNS_SUBMITTED:"all_defns_submitted",ALL_PLAYERS_VOTED:"all_players_voted",PLAYER_VOTED:"player_voted"},p=function(){function e(t){var n=this;Object(a.a)(this,e),this.store=null,this.users={},this.host=null,this.tmpUserName="",this.registeredUserName="",this.registeringUser=!1,Object(u.l)(this),this.store=t,this.tmpUserName=window.sessionStorage.getItem("userName")||"",m(v.ON_CONNECT,(function(e){return n.initializeExistingUsers(e)})),m(v.PLAYER_REGISTERED,(function(e){return n.addPlayer(e)})),m(v.GAME_BEGUN,(function(e){return n.onGameBegins(e)}))}return Object(g.a)(e,[{key:"userNameRegisterButtonDisabled",get:function(){return this.registeringUser||this.registeredUserName===this.tmpUserName||!this.tmpUserName}},{key:"getPeople",get:function(){return Object.entries(this.users).map((function(e){var t=Object(x.a)(e,2),n=t[0],i=t[1];return Object(f.a)({name:n},i)}))}},{key:"isHost",get:function(){return this.registeredUserName===this.host}},{key:"isRegistered",get:function(){return!!this.registeredUserName}}]),Object(g.a)(e,[{key:"initializeExistingUsers",value:function(e){var t=this,n=e.users,i=void 0===n?[]:n,s=e.host;i.forEach((function(e){return t.users[e.name]=e})),this.host=s}},{key:"addPlayer",value:function(e){var t=e.name,n=e.oldName;delete this.users[n],this.users[t]=e}},{key:"onGameBegins",value:function(e){var t=this,n=e.host,i=e.users;this.host=n,i.forEach((function(e){return t.users[e.name]=e}))}},{key:"registerUserName",value:function(){var e=this;this.registeringUser=!0,O(v.REGISTER_PLAYER,this.tmpUserName,Object(u.f)((function(){e.registeringUser=!1,e.registeredUserName=e.tmpUserName,window.sessionStorage.setItem("userName",e.tmpUserName)})))}},{key:"typeUserName",value:function(e){this.tmpUserName=e}}]),e}(),E=function(){function e(t){var n=this;Object(a.a)(this,e),this.store=null,this.tmpHostWord="",this.hostWord="",this.hostWordSubmitDisabled=!1,this.stage=null,this.summary=[],Object(u.l)(this),this.store=t,m(v.ON_CONNECT,(function(e){return n.initializeGame(e)})),m(v.GAME_BEGUN,(function(e){return n.onBegin(e)})),m(v.HOST_SUBMITTED_WORD,(function(e){return n.onHostSubmittedWord(e)})),m(v.ALL_DEFNS_SUBMITTED,(function(e){return n.setStage("voting")})),m(v.ALL_PLAYERS_VOTED,(function(e){return n.onAllPlayersVoted(e)}))}return Object(g.a)(e,[{key:"initializeGame",value:function(e){var t=e.playing,n=e.hostWord,i=e.stage;this.playing=t,this.hostWord=n,this.stage=i}},{key:"onBegin",value:function(e){var t=e.stage;this.playing=!0,this.stage=t}},{key:"onHostSubmittedWord",value:function(e){var t=e.stage,n=e.word,i=void 0===n?"fake":n;this.hostWord=i,this.stage=t}},{key:"onAllPlayersVoted",value:function(e){var t=e.summary;this.summary=t,this.stage="summary"}},{key:"begin",value:function(){O(v.BEGIN_GAME)}},{key:"claimHost",value:function(){O(v.BEGIN_GAME_CLAIMING_HOST)}},{key:"submitHostWord",value:function(){var e=this;this.hostWordSubmitDisabled=!0,O(v.HOST_SUBMITS_WORD,this.tmpHostWord,Object(u.f)((function(){return e.hostWordSubmitDisabled=!1})))}},{key:"typeHostWord",value:function(e){this.tmpHostWord=e}},{key:"setStage",value:function(e){this.stage=e}}]),e}(),y=n(204),_=n.n(y),N=function(){function e(t){var n=this;Object(a.a)(this,e),this.tmpDefinition="",this.playerSubmissionPercent=0,this.definitions=[],this.hasVoted=!0,Object(u.l)(this),this.store=t,m(v.ON_CONNECT,(function(e){return n.initializeDefinitions(e)})),m(v.PLAYER_SUBMITTED_DEFN,(function(e){return n.onPlayerSubittedDefinition(e)})),m(v.PLAYER_VOTED,(function(e){return n.onPlayerVoted(e)}))}return Object(g.a)(e,[{key:"initializeDefinitions",value:function(e){var t=e.definitions;this.definitions=t,this.tmpDefinition=""}},{key:"onPlayerSubittedDefinition",value:function(e){var t=e.percent,n=e.definition;this.playerSubmissionPercent=t,this.definitions.push(n)}},{key:"onPlayerVoted",value:function(e){var t=e._id,n=e.votes;_()(this.definitions,{_id:t}).votes=n}},{key:"submitDefinition",value:function(){var e=this;O(v.PLAYER_SUBMITS_DEFN,this.tmpDefinition,Object(u.f)((function(){"writing"===e.store.game.stage&&(e.store.users.isHost?e.store.game.setStage("voting"):e.store.game.setStage("waiting"))})))}},{key:"vote",value:function(e){var t=this;O(v.VOTE,e,Object(u.f)((function(){return t.hasVoted=!1})))}},{key:"typeDefinition",value:function(e){this.tmpDefinition=e}}]),e}(),S=new function e(){Object(a.a)(this,e),this.users=null,this.game=null,this.definitions=null,Object(u.l)(this),this.users=new p(this),this.game=new E(this),this.definitions=new N(this),console.log("connecting"),b.connect(),this.users.tmpUserName&&this.users.registerUserName()},C=Object(s.createContext)(),D=n(372),T=function(){return Object(i.jsx)(D.a.Pane,{children:Object(i.jsx)("p",{children:"Waiting for the host to select a word"})})},U=n(368),I=Object(c.a)((function(){var e=Object(s.useContext)(C).definitions;return Object(i.jsxs)(D.a.Pane,{children:[Object(i.jsx)("p",{children:"Waiting for all the players to submit their defintions."}),Object(i.jsx)(U.a,{percent:e.playerSubmissionPercent,indicating:!0})]})})),P=n(367),w=n(369),k=n(43),R=n(366),A=function(e){e._id;var t=e.user,n=void 0===t?"ANON":t,r=e.text,o=void 0===r?"NO TEXT":r,c=e.votes,a=void 0===c?0:c,u=e.showUser,j=e.allowVote,l=e.onClick,d=void 0===l?function(){}:l,h=Object(s.useState)(!1),b=Object(x.a)(h,2),O=b[0],m=b[1];return Object(i.jsxs)(P.a.Item,{onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},children:[Object(i.jsx)(P.a.Icon,{style:{width:30},children:Object(i.jsxs)(w.a,{size:"mini",children:[Object(i.jsx)(w.a.Value,{children:a}),Object(i.jsx)(w.a.Label,{children:"Votes"})]})}),Object(i.jsxs)(P.a.Content,{onClick:j?function(){return d()}:function(){},children:[Object(i.jsx)(P.a.Description,{children:o}),Object(i.jsxs)(P.a.Header,{as:"a",children:[u&&n,O&&j&&Object(i.jsx)(k.a,{name:"check",color:"green"})]})]})]})},W=Object(c.a)((function(e){var t=e.allowVote,n=e.showUser,r=Object(s.useContext)(C).definitions,o=Object(s.useState)(null),c=Object(x.a)(o,2),a=c[0],u=c[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)(P.a,{divided:!0,relaxed:!0,children:r.definitions.map((function(e){var s=e._id;return Object(i.jsx)(A,Object(f.a)({showUser:n,allowVote:t,onClick:function(){return u(e)}},e),s)}))}),Object(i.jsx)(R.a,{header:"Do you want to vote for this Defintion",content:a?a.text:"",open:!!a,onCancel:function(){return u(null)},onConfirm:function(){r.vote(a._id),u(null)}})]})})),H=Object(c.a)((function(){var e=Object(s.useContext)(C).definitions;return Object(i.jsxs)(D.a.Pane,{children:[Object(i.jsx)("p",{children:"Waiting for all the players to submit their definitions."}),Object(i.jsx)(U.a,{percent:e.playerSubmissionPercent,indicating:!0}),Object(i.jsx)(W,{showUser:!0})]})})),L=n(370),B=n(365),G=n(362),M=n(348),V=Object(c.a)((function(){var e=Object(s.useContext)(C),t=e.game,n=e.definitions;return Object(i.jsxs)(D.a.Pane,{children:[Object(i.jsxs)(L.a,{as:"h2",children:[Object(i.jsx)(k.a,{name:"envelope outline"}),Object(i.jsx)(L.a.Content,{children:t.hostWord})]}),Object(i.jsx)("p",{children:"Enter your definition. Once all the players are done. we'll move onto voting"}),Object(i.jsxs)(B.a,{children:[Object(i.jsx)(G.a,{placeholder:"Enter your definition",rows:4,onChange:function(e,t){var i=t.value;return n.typeDefinition(i)},value:"".concat(n.tmpDefinition)||""}),Object(i.jsx)(M.a,{fluid:!0,float:"right",content:"Submit Definition",onClick:function(){return n.submitDefinition()}})]})]})})),Y=n(361),z=Object(c.a)((function(){var e=Object(s.useContext)(C),t=e.game;return Object(i.jsxs)(D.a.Pane,{children:[Object(i.jsx)("p",{children:"Enter a word. once you are ready hit subit to notify all the players"}),Object(i.jsx)(Y.a,{fluid:!0,placeholder:"Enter a word",value:e.hostWord,onChange:function(e,n){var i=n.value;return t.typeHostWord(i)},action:{content:"Submit",onClick:function(){return t.submitHostWord()},disabled:e.hostWordSubmitDisabled}})]})})),F=function(){return Object(i.jsx)(D.a.Pane,{children:Object(i.jsx)(W,{allowVote:!0})})},J=n(163),X=Object(c.a)((function(){var e=Object(s.useContext)(C).game;return Object(i.jsxs)(D.a.Pane,{children:[Object(i.jsxs)(J.a,{children:[Object(i.jsx)("p",{children:"Round is complete!"}),Object(i.jsxs)(L.a,{as:"h2",children:[Object(i.jsx)(k.a,{name:"envelope outline"}),Object(i.jsx)(L.a.Content,{children:e.hostWord})]})]}),Object(i.jsx)(P.a,{divided:!0,relaxed:!0,children:e.summary.map((function(e){var t=e.name,n=e.host,s=e.text,r=e.votedBy,o=e.points;return Object(i.jsxs)(P.a.Item,{children:[Object(i.jsx)(P.a.Icon,{children:Object(i.jsxs)(w.a,{size:"mini",children:[Object(i.jsx)(w.a.Value,{children:o}),Object(i.jsx)(w.a.Label,{children:"Points"})]})}),Object(i.jsxs)(P.a.Content,{children:[Object(i.jsxs)(P.a.Header,{as:"a",children:[Object(i.jsx)(k.a,{name:n?"user secret":"user outline"}),t]}),Object(i.jsx)(P.a.Description,{children:s}),Object(i.jsx)(P.a,{horizontal:!0,children:r.map((function(e,t){return Object(i.jsx)(P.a.Item,{children:Object(i.jsx)(P.a.Header,{as:"a",children:e})},t)}))})]})]},t)}))}),Object(i.jsxs)(J.a,{children:[Object(i.jsx)("p",{children:"Restart the game"}),Object(i.jsxs)(M.a.Group,{children:[Object(i.jsx)(M.a,{content:"randomize Host",onClick:function(){return e.begin()}}),Object(i.jsx)(M.a,{content:"claim Host",onClick:function(){return e.claimHost()}})]})]})]})})),K=Object(c.a)((function(e){var t=e.children,n=e.panes,r=e.screenMap,o=void 0===r?{}:r,c=Object(s.useContext)(C).game;return Object(i.jsxs)("div",{children:[Object(i.jsx)(J.a,{children:t}),Object(i.jsx)(D.a,{panes:n,activeIndex:o[c.stage]})]})})),q=[{menuItem:"Choose a word",render:function(){return Object(i.jsx)(z,{})}},{menuItem:"write the true definition",render:function(){return Object(i.jsx)(V,{})}},{menuItem:"Watch Votes",render:function(){return Object(i.jsx)(H,{})}},{menuItem:"Summary",render:function(){return Object(i.jsx)(X,{})}}],Q={choosing:0,writing:1,voting:2,summary:3},Z=function(){return Object(i.jsx)(K,{panes:q,screenMap:Q,children:Object(i.jsx)("p",{children:"You are the Host!"})})},$=[{menuItem:"Host Chooses a Word",render:function(){return Object(i.jsx)(T,{})}},{menuItem:"Write a Definition",render:function(){return Object(i.jsx)(V,{})}},{menuItem:"Wait for results",render:function(){return Object(i.jsx)(I,{})}},{menuItem:"Vote",render:function(){return Object(i.jsx)(F,{})}},{menuItem:"Summary",render:function(){return Object(i.jsx)(X,{})}}],ee={choosing:0,writing:1,waiting:2,voting:3,summary:4},te=Object(c.a)((function(){var e=Object(s.useContext)(C).users;return Object(i.jsxs)(K,{panes:$,screenMap:ee,children:[Object(i.jsx)("p",{children:"You Are a Player!"}),Object(i.jsxs)("p",{children:[Object(i.jsx)("strong",{children:e.host})," is the Host!"]})]})})),ne=Object(c.a)((function(){var e=Object(s.useContext)(C).game;return Object(i.jsx)("div",{children:Object(i.jsxs)(J.a,{children:[Object(i.jsx)("p",{children:"The game hasn't started yet"}),Object(i.jsx)("p",{children:"Once Everyone has registered hit the button to start"}),Object(i.jsx)(M.a,{fluid:!0,onClick:function(){return e.begin()},content:"Begin"})]})})})),ie=function(){return Object(i.jsx)("div",{children:Object(i.jsx)(J.a,{children:Object(i.jsx)("p",{children:"Please Register a name to join the game in progress"})})})},se=Object(c.a)((function(){var e=Object(s.useContext)(C),t=e.game,n=e.users;return n.isRegistered?"lobby"===t.stage?Object(i.jsx)(ne,{}):n.isHost?Object(i.jsx)(Z,{}):Object(i.jsx)(te,{}):Object(i.jsx)(ie,{})})),re=n(349),oe=n(210),ce=n(363),ae=n(209),ue=function(e){var t=e.name,n=void 0===t?"Anon":t,s=e.points,r=void 0===s?-1:s;return Object(i.jsxs)(P.a.Item,{children:[Object(i.jsx)(P.a.Header,{as:"a",children:n}),Object(i.jsxs)(P.a.Description,{children:[" ",r," points"]})]})},je=Object(c.a)((function(){var e=Object(s.useContext)(C);return Object(i.jsxs)(J.a,{children:[Object(i.jsx)(L.a,{children:"People in the room"}),Object(i.jsx)(P.a,{children:e.users.getPeople.map((function(e){var t=e.name,n=Object(ae.a)(e,["name"]);return Object(i.jsx)(ue,Object(f.a)({name:t},n),t)}))})]})})),le=function(e){var t=e.children,n=Object(s.useRef)();return Object(i.jsx)(re.a,{innerRef:n,children:Object(i.jsxs)(oe.a,{children:[Object(i.jsx)(oe.a.Column,{width:4,children:Object(i.jsx)(ce.a,{context:n,offset:100,children:Object(i.jsx)(je,{})})}),Object(i.jsx)(oe.a.Column,{stretched:!0,width:12,children:t})]})})},de=n(207),he=n(364),be=Object(c.a)((function(){var e=Object(s.useContext)(C).users;return Object(i.jsx)(de.a,{fixed:"top",inverted:!0,children:Object(i.jsx)(he.a,{children:Object(i.jsx)(de.a.Item,{position:"right",children:Object(i.jsx)(Y.a,{placeholder:"Enter Your Username",action:{content:"Register",onClick:function(){return e.registerUserName()},disabled:e.userNameRegisterButtonDisabled,loading:e.registeringUser},disabled:e.registeringUser,onChange:function(t,n){var i=n.value;return e.typeUserName(i)},value:e.tmpUserName})})})})})),Oe=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(be,{}),Object(i.jsx)(he.a,{style:{marginTop:"7em"},children:Object(i.jsx)(le,{children:Object(i.jsx)(se,{})})})]})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,373)).then((function(t){var n=t.getCLS,i=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),i(e),s(e),r(e),o(e)}))};n(345),n(346);o.a.render(Object(i.jsx)(C.Provider,{value:S,children:Object(i.jsx)(Oe,{})}),document.getElementById("root")),me()}},[[347,1,2]]]);
//# sourceMappingURL=main.7c2fe063.chunk.js.map